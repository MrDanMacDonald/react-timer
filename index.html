<html>
  <head>
    <title>Nav-Bar</title>
    <link type="text/css" rel="stylesheet" href="styles.css"/>
    <script src="http://fb.me/react-0.12.2.js"></script>
    <script src="http://fb.me/JSXTransformer-0.12.2.js"></script>
    <script type="text/javascript" src="https://code.jquery.com/jquery-2.1.1.min.js"></script>
  </head>
  <body>
    <div id="content"></div>
    <script type="text/jsx">

    // Problem: need to remove the focused class from the
    // other NavBarItems
    // State.focused must be set to false

      var NavBar = React.createClass({
        propTypes: {
          navItems: React.PropTypes.array.isRequired,
          item: React.PropTypes.string
        },
        getDefaultProps: function () {
          return {
            item: ''
          };
        },
        handleClicked: function(navBarItemObj) {
          // How to set focused to false on the other children
          navBarItemObj.setState({
            focused: true
          });
        },
        renderNavItems: function() {
          return this.props.navItems.map(function(item, i) {
            return (
                <NavBarItem
                key={'item-' + i}
                item={item}
                onClick={this.handleClicked}
                index={i} />
            );
          }.bind(this));
        },
        render: function () {
          return (
            <ul>
              {this.renderNavItems()}
            </ul>
          );
        }
      });

      var NavBarItem = React.createClass({
        propTypes: {
          item: React.PropTypes.string.isRequired,
          index: React.PropTypes.number.isRequired,
        },
        getInitialState: function() {
          return {
            focused: false
          };
        },
        handleClicked: function() {
          this.props.onClick(this);
        },
        render: function() {
          var style = ''
          if(this.state.focused == true){
            style = 'focused';
          };

          // Question: why do I have to bind on handleClicked
          // http://stackoverflow.com/questions/27172358/reactjs-passing-methods-as-props-to-child
          return (
            <li
              className={style}
              onClick={this.handleClicked}>
                {this.props.item}
            </li>
          );
        }
      });

      React.render(
        <NavBar navItems={['home', 'about', 'services', 'contact us']} />,
          document.getElementById("content")
      );
    </script>
  </body>
</html>
